jsonb_pretty
"{
    ""enums"": [
        {
            ""name"": ""Status"",
            ""values"": [
                ""Open"",
                ""Wait"",
                ""Progress"",
                ""Closed""
            ]
        },
        {
            ""name"": ""finalidade_enum"",
            ""values"": [
                ""Aluguel"",
                ""Venda""
            ]
        },
        {
            ""name"": ""obj_enum"",
            ""values"": [
                ""preco_alto"",
                ""falta_tempo"",
                ""sistema_complexo"",
                ""duvida_roi"",
                ""ja_uso_outra_solucao"",
                ""medo_ia"",
                ""outro""
            ]
        },
        {
            ""name"": ""pain_enum"",
            ""values"": [
                ""baixa_conversao"",
                ""alto_cac"",
                ""falta_automatizacao"",
                ""lentidao_resposta"",
                ""perda_leads"",
                ""objecoes_preco"",
                ""falta_visibilidade_funil"",
                ""outro""
            ]
        },
        {
            ""name"": ""plano_sugerido"",
            ""values"": [
                ""essencial"",
                ""premium"",
                ""enterprise""
            ]
        },
        {
            ""name"": ""profile_enum"",
            ""values"": [
                ""analitico"",
                ""diretivo"",
                ""expressivo"",
                ""afavel"",
                ""outro""
            ]
        },
        {
            ""name"": ""sector_enum"",
            ""values"": [
                ""moda"",
                ""saude"",
                ""tecnologia"",
                ""educacao"",
                ""construcao"",
                ""servicos_financeiros"",
                ""agronegocio"",
                ""industria"",
                ""comercio_eletronico"",
                ""marketing"",
                ""outro""
            ]
        },
        {
            ""name"": ""stage_enum"",
            ""values"": [
                ""pre_qualificacao"",
                ""qualificacao_aprofundada""
            ]
        },
        {
            ""name"": ""status_followups"",
            ""values"": [
                ""N√£o Come√ßou"",
                ""Andamento"",
                ""Recebeu Todos""
            ]
        }
    ],
    ""views"": [
        {
            ""name"": ""corev4_chat_history_readable"",
            ""definition"": "" SELECT ch.id,\n    ch.session_id,\n    ch.contact_id,\n    ch.company_id,\n    ch.role,\n    ch.message,\n    ch.message_type,\n    ch.media_url,\n    ch.media_mime_type,\n    ch.tokens_used,\n    ch.cost_usd,\n    ch.model_used,\n    ch.message_timestamp,\n    ch.created_at,\n    ch.has_media,\n    to_char((ch.message_timestamp AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS message_timestamp_br,\n    to_char((ch.created_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS created_at_br,\n        CASE\n            WHEN ((ch.role)::text = 'human'::text) THEN 'Lead'::character varying\n            WHEN ((ch.role)::text = 'ai'::text) THEN 'Frank (Bot)'::character varying\n            ELSE ch.role\n        END AS role_readable\n   FROM corev4_chat_history ch;""
        },
        {
            ""name"": ""corev4_contacts_readable"",
            ""definition"": "" SELECT c.id,\n    c.company_id,\n    c.full_name,\n    c.whatsapp,\n    c.phone_number,\n    c.email,\n    c.origin_source,\n    c.utm_source,\n    c.utm_medium,\n    c.utm_campaign,\n    c.utm_adgroup,\n    c.utm_creative,\n    c.sector,\n    c.tags,\n    c.opt_out,\n    c.is_active,\n    c.created_at,\n    c.updated_at,\n    c.last_interaction_at,\n    to_char((c.created_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS created_at_br,\n    to_char((c.updated_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS updated_at_br,\n    to_char((c.last_interaction_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS last_interaction_at_br,\n        CASE\n            WHEN (c.opt_out = true) THEN 'OPT-OUT'::text\n            ELSE 'ATIVO'::text\n        END AS status_readable,\n    ((EXTRACT(epoch FROM (now() - c.last_interaction_at)))::integer / 3600) AS hours_since_last_interaction\n   FROM corev4_contacts c;""
        },
        {
            ""name"": ""corev4_followup_campaigns_readable"",
            ""definition"": "" SELECT fc.id,\n    fc.contact_id,\n    fc.company_id,\n    fc.config_id,\n    fc.status,\n    fc.pause_reason,\n    fc.steps_completed,\n    fc.total_steps,\n    fc.last_step_sent_at,\n    fc.should_continue,\n    fc.stopped_reason,\n    fc.created_at,\n    fc.updated_at,\n    to_char((fc.created_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS created_at_br,\n    to_char((fc.updated_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS updated_at_br,\n    to_char((fc.last_step_sent_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS last_step_sent_at_br,\n    concat(fc.steps_completed, '/', fc.total_steps) AS progress_readable,\n        CASE\n            WHEN (((fc.status)::text = 'active'::text) AND (fc.should_continue = true)) THEN 'ATIVO'::text\n            WHEN ((fc.status)::text = 'completed'::text) THEN 'CONCLU√çDO'::text\n            WHEN ((fc.status)::text = 'stopped'::text) THEN 'PARADO'::text\n            WHEN (((fc.status)::text = 'active'::text) AND (fc.should_continue = false)) THEN 'PAUSADO'::text\n            ELSE upper((fc.status)::text)\n        END AS status_readable\n   FROM corev4_followup_campaigns fc;""
        },
        {
            ""name"": ""corev4_followup_configs_with_steps"",
            ""definition"": "" SELECT c.id,\n    c.company_id,\n    c.total_steps,\n    c.is_active,\n    jsonb_object_agg(('step_'::text || s.step_number), ((s.wait_hours)::numeric + ((s.wait_minutes)::numeric / (60)::numeric))) AS timing_pattern,\n    c.created_at\n   FROM (corev4_followup_configs c\n     LEFT JOIN corev4_followup_steps s ON ((c.id = s.config_id)))\n  GROUP BY c.id, c.company_id, c.total_steps, c.is_active, c.created_at;""
        },
        {
            ""name"": ""corev4_followup_executions_readable"",
            ""definition"": "" SELECT e.id,\n    e.campaign_id,\n    e.contact_id,\n    e.company_id,\n    e.step,\n    e.total_steps,\n    e.scheduled_at,\n    e.executed,\n    e.sent_at,\n    e.generated_message,\n    e.generation_context,\n    e.should_send,\n    e.decision_reason,\n    e.anum_at_execution,\n    e.evolution_message_id,\n    e.evolution_api_url,\n    e.evolution_instance,\n    e.created_at,\n    e.updated_at,\n    to_char((e.scheduled_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI'::text) AS scheduled_at_br,\n    to_char((e.sent_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI'::text) AS sent_at_br,\n    to_char((e.created_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS created_at_br,\n    to_char((e.updated_at AT TIME ZONE 'America/Sao_Paulo'::text), 'DD/MM/YYYY HH24:MI:SS'::text) AS updated_at_br,\n        CASE\n            WHEN ((e.executed = false) AND (e.scheduled_at <= now())) THEN 'ATRASADO'::text\n            WHEN ((e.executed = false) AND (e.scheduled_at > now())) THEN 'PENDENTE'::text\n            WHEN (e.executed = true) THEN 'ENVIADO'::text\n            ELSE 'DESCONHECIDO'::text\n        END AS status_readable,\n        CASE\n            WHEN ((e.executed = false) AND (e.scheduled_at <= now())) THEN (EXTRACT(epoch FROM (now() - e.scheduled_at)))::integer\n            ELSE NULL::integer\n        END AS delay_seconds\n   FROM corev4_followup_executions e;""
        },
        {
            ""name"": ""corev4_lead_state_with_pain"",
            ""definition"": "" SELECT ls.id,\n    ls.company_id,\n    ls.contact_id,\n    ls.authority_score,\n    ls.need_score,\n    ls.urgency_score,\n    ls.money_score,\n    ls.total_score,\n    ls.qualification_stage,\n    ls.is_qualified,\n    ls.status,\n    ls.analysis_count,\n    ls.last_analyzed_at,\n    ls.analyzed_at,\n    ls.created_at,\n    ls.updated_at,\n    ls.main_pain_category_id,\n    ls.main_pain_detail,\n    pc.category_key,\n    pc.category_label_pt AS pain_category_label,\n    pc.category_label_en AS pain_category_label_en,\n        CASE\n            WHEN (ls.main_pain_category_id IS NULL) THEN 'N√£o categorizado'::character varying\n            WHEN ((pc.category_key)::text = 'other'::text) THEN (ls.main_pain_detail)::character varying\n            ELSE pc.category_label_pt\n        END AS pain_display\n   FROM (corev4_lead_state ls\n     LEFT JOIN corev4_pain_categories pc ON ((ls.main_pain_category_id = pc.id)));""
        }
    ],
    ""tables"": [
        {
            ""name"": ""corev4_ai_decisions"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_ai_decisions_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""followup_execution_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""model_used"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""decision"",
                    ""type"": ""character varying(30)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""confidence_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""reasoning"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""context_snapshot"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""processing_time_ms"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""tokens_used"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""cost_usd"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 11
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_ai_decisions_execution"",
                    ""definition"": ""CREATE INDEX idx_ai_decisions_execution ON public.corev4_ai_decisions USING btree (followup_execution_id, created_at DESC)""
                },
                {
                    ""name"": ""corev4_ai_decisions_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_ai_decisions_pkey ON public.corev4_ai_decisions USING btree (id)""
                },
                {
                    ""name"": ""idx_ai_decisions_exec"",
                    ""definition"": ""CREATE INDEX idx_ai_decisions_exec ON public.corev4_ai_decisions USING btree (followup_execution_id)""
                },
                {
                    ""name"": ""idx_ai_decisions_model"",
                    ""definition"": ""CREATE INDEX idx_ai_decisions_model ON public.corev4_ai_decisions USING btree (model_used)""
                },
                {
                    ""name"": ""idx_ai_decisions_decision"",
                    ""definition"": ""CREATE INDEX idx_ai_decisions_decision ON public.corev4_ai_decisions USING btree (decision)""
                },
                {
                    ""name"": ""idx_ai_decisions_created"",
                    ""definition"": ""CREATE INDEX idx_ai_decisions_created ON public.corev4_ai_decisions USING btree (created_at DESC)""
                },
                {
                    ""name"": ""idx_ai_cost_analytics"",
                    ""definition"": ""CREATE INDEX idx_ai_cost_analytics ON public.corev4_ai_decisions USING btree (model_used, decision, created_at DESC)""
                },
                {
                    ""name"": ""idx_ai_execution_link"",
                    ""definition"": ""CREATE INDEX idx_ai_execution_link ON public.corev4_ai_decisions USING btree (followup_execution_id, created_at DESC)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""followup_execution_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_ai_decisions_followup_execution"",
                    ""references_table"": ""corev4_followup_executions"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""followup_execution_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_followup_execution"",
                    ""references_table"": ""corev4_followup_executions"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""corev4_ai_decisions_confidence_score_check"",
                    ""expression"": ""(((confidence_score >= 0) AND (confidence_score <= 100)))""
                }
            ],
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_anum_history"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_anum_history_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""authority_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""need_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""urgency_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 6
                },
                {
                    ""name"": ""money_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 7
                },
                {
                    ""name"": ""total_score"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 8
                },
                {
                    ""name"": ""is_qualified"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": false,
                    ""position"": 9
                },
                {
                    ""name"": ""qualification_stage"",
                    ""type"": ""character varying(20)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""evidence"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""confidence_score"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""messages_analyzed"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 13
                },
                {
                    ""name"": ""analysis_reasoning"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""authority_delta"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""need_delta"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""urgency_delta"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""money_delta"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""trigger_source"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'anum_analyzer'::character varying"",
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""analyzed_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 20
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 21
                },
                {
                    ""name"": ""main_pain_category_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 22
                },
                {
                    ""name"": ""main_pain_detail"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 23
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_anum_history_pain_category"",
                    ""definition"": ""CREATE INDEX idx_anum_history_pain_category ON public.corev4_anum_history USING btree (main_pain_category_id)""
                },
                {
                    ""name"": ""corev4_anum_history_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_anum_history_pkey ON public.corev4_anum_history USING btree (id)""
                },
                {
                    ""name"": ""idx_anum_history_contact"",
                    ""definition"": ""CREATE INDEX idx_anum_history_contact ON public.corev4_anum_history USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_anum_history_company"",
                    ""definition"": ""CREATE INDEX idx_anum_history_company ON public.corev4_anum_history USING btree (company_id)""
                },
                {
                    ""name"": ""idx_anum_history_analyzed_at"",
                    ""definition"": ""CREATE INDEX idx_anum_history_analyzed_at ON public.corev4_anum_history USING btree (analyzed_at DESC)""
                },
                {
                    ""name"": ""idx_anum_history_qualified"",
                    ""definition"": ""CREATE INDEX idx_anum_history_qualified ON public.corev4_anum_history USING btree (is_qualified)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""main_pain_category_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_anum_history_main_pain_category_id_fkey"",
                    ""references_table"": ""corev4_pain_categories"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_anum_history_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_anum_history_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""corev4_anum_history_authority_score_check"",
                    ""expression"": ""(((authority_score >= 0) AND (authority_score <= 100)))""
                },
                {
                    ""name"": ""corev4_anum_history_confidence_score_check"",
                    ""expression"": ""(((confidence_score >= (0)::numeric) AND (confidence_score <= (1)::numeric)))""
                },
                {
                    ""name"": ""corev4_anum_history_money_score_check"",
                    ""expression"": ""(((money_score >= 0) AND (money_score <= 100)))""
                },
                {
                    ""name"": ""corev4_anum_history_need_score_check"",
                    ""expression"": ""(((need_score >= 0) AND (need_score <= 100)))""
                },
                {
                    ""name"": ""corev4_anum_history_qualification_stage_check"",
                    ""expression"": ""(((qualification_stage)::text = ANY ((ARRAY['pre'::character varying, 'partial'::character varying, 'full'::character varying, 'rejected'::character varying])::text[])))""
                },
                {
                    ""name"": ""corev4_anum_history_urgency_score_check"",
                    ""expression"": ""(((urgency_score >= 0) AND (urgency_score <= 100)))""
                }
            ],
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_blocklist"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_blocklist_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""phone_number"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""reason"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""added_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 5
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_blocklist_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_blocklist_pkey ON public.corev4_blocklist USING btree (id)""
                },
                {
                    ""name"": ""corev4_blocklist_phone_number_company_id_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_blocklist_phone_number_company_id_key ON public.corev4_blocklist USING btree (phone_number, company_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_blocklist_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_blocklist_phone_number_company_id_key"",
                    ""columns"": [
                        ""phone_number"",
                        ""company_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_calendar_settings"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_calendar_settings_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""calendar_provider"",
                    ""type"": ""text"",
                    ""default"": ""'google'::text"",
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""calendar_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""timezone"",
                    ""type"": ""text"",
                    ""default"": ""'America/Sao_Paulo'::text"",
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""business_hours_start"",
                    ""type"": ""time without time zone"",
                    ""default"": ""'09:00:00'::time without time zone"",
                    ""nullable"": false,
                    ""position"": 6
                },
                {
                    ""name"": ""business_hours_end"",
                    ""type"": ""time without time zone"",
                    ""default"": ""'18:00:00'::time without time zone"",
                    ""nullable"": false,
                    ""position"": 7
                },
                {
                    ""name"": ""meeting_duration_minutes"",
                    ""type"": ""integer"",
                    ""default"": ""45"",
                    ""nullable"": false,
                    ""position"": 8
                },
                {
                    ""name"": ""buffer_before_minutes"",
                    ""type"": ""integer"",
                    ""default"": ""15"",
                    ""nullable"": false,
                    ""position"": 9
                },
                {
                    ""name"": ""buffer_after_minutes"",
                    ""type"": ""integer"",
                    ""default"": ""15"",
                    ""nullable"": false,
                    ""position"": 10
                },
                {
                    ""name"": ""min_notice_hours"",
                    ""type"": ""integer"",
                    ""default"": ""24"",
                    ""nullable"": false,
                    ""position"": 11
                },
                {
                    ""name"": ""max_days_ahead"",
                    ""type"": ""integer"",
                    ""default"": ""14"",
                    ""nullable"": false,
                    ""position"": 12
                },
                {
                    ""name"": ""max_meetings_per_day"",
                    ""type"": ""integer"",
                    ""default"": ""4"",
                    ""nullable"": false,
                    ""position"": 13
                },
                {
                    ""name"": ""allowed_weekdays"",
                    ""type"": ""ARRAY"",
                    ""default"": ""ARRAY['monday'::text, 'tuesday'::text, 'wednesday'::text, 'thursday'::text, 'friday'::text]"",
                    ""nullable"": false,
                    ""position"": 14
                },
                {
                    ""name"": ""preferred_time_slots"",
                    ""type"": ""jsonb"",
                    ""default"": ""'[{\""end\"": \""12:00\"", \""label\"": \""Manh√£ produtiva\"", \""start\"": \""10:00\"", \""priority\"": \""high\""}, {\""end\"": \""16:00\"", \""label\"": \""Tarde cedo\"", \""start\"": \""14:00\"", \""priority\"": \""medium\""}, {\""end\"": \""10:00\"", \""label\"": \""In√≠cio do dia\"", \""start\"": \""09:00\"", \""priority\"": \""low\""}, {\""end\"": \""18:00\"", \""label\"": \""Final do dia\"", \""start\"": \""16:00\"", \""priority\"": \""low\""}]'::jsonb"",
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""preferred_weekdays"",
                    ""type"": ""jsonb"",
                    ""default"": ""'{\""friday\"": 1, \""monday\"": 2, \""tuesday\"": 3, \""thursday\"": 3, \""wednesday\"": 3}'::jsonb"",
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""excluded_dates"",
                    ""type"": ""ARRAY"",
                    ""default"": ""ARRAY[]::date[]"",
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""api_credentials_encrypted"",
                    ""type"": ""bytea"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""api_refresh_token_encrypted"",
                    ""type"": ""bytea"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""api_token_expires_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 20
                },
                {
                    ""name"": ""cal_com_api_key_encrypted"",
                    ""type"": ""bytea"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 21
                },
                {
                    ""name"": ""cal_com_event_type_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 22
                },
                {
                    ""name"": ""cal_com_username"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 23
                },
                {
                    ""name"": ""slots_to_offer"",
                    ""type"": ""integer"",
                    ""default"": ""3"",
                    ""nullable"": false,
                    ""position"": 24
                },
                {
                    ""name"": ""offer_expiration_hours"",
                    ""type"": ""integer"",
                    ""default"": ""24"",
                    ""nullable"": false,
                    ""position"": 25
                },
                {
                    ""name"": ""slot_offer_template"",
                    ""type"": ""text"",
                    ""default"": ""'Legal! Deixa eu ver a agenda do Francisco...\n\nTemos essas op√ß√µes nos pr√≥ximos dias:\n{slots}\n\nQual funciona melhor pra voc√™? (responde 1, 2 ou 3)'::text"",
                    ""nullable"": true,
                    ""position"": 26
                },
                {
                    ""name"": ""booking_confirmation_template"",
                    ""type"": ""text"",
                    ""default"": ""'‚úÖ Perfeito! Sua Mesa de Clareza est√° confirmada:\n\nüìÖ {date}\n‚è∞ {time}\nüîó Link: {meeting_url}\n\nTe mando lembretes 24h e 1h antes.\n\nAt√© l√°! üöÄ'::text"",
                    ""nullable"": true,
                    ""position"": 27
                },
                {
                    ""name"": ""is_active"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": false,
                    ""position"": 28
                },
                {
                    ""name"": ""last_sync_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 29
                },
                {
                    ""name"": ""last_sync_status"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 30
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 31
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 32
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_calendar_settings_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_calendar_settings_pkey ON public.corev4_calendar_settings USING btree (id)""
                },
                {
                    ""name"": ""corev4_calendar_settings_company_id_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_calendar_settings_company_id_key ON public.corev4_calendar_settings USING btree (company_id)""
                },
                {
                    ""name"": ""idx_calendar_settings_company"",
                    ""definition"": ""CREATE INDEX idx_calendar_settings_company ON public.corev4_calendar_settings USING btree (company_id)""
                },
                {
                    ""name"": ""idx_calendar_settings_provider"",
                    ""definition"": ""CREATE INDEX idx_calendar_settings_provider ON public.corev4_calendar_settings USING btree (calendar_provider)""
                },
                {
                    ""name"": ""idx_calendar_settings_active"",
                    ""definition"": ""CREATE INDEX idx_calendar_settings_active ON public.corev4_calendar_settings USING btree (is_active) WHERE (is_active = true)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""trg_calendar_settings_updated_at"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION update_calendar_settings_timestamp()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_calendar_settings_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""corev4_calendar_settings_buffer_after_minutes_check"",
                    ""expression"": ""((buffer_after_minutes >= 0))""
                },
                {
                    ""name"": ""corev4_calendar_settings_buffer_before_minutes_check"",
                    ""expression"": ""((buffer_before_minutes >= 0))""
                },
                {
                    ""name"": ""corev4_calendar_settings_calendar_provider_check"",
                    ""expression"": ""((calendar_provider = ANY (ARRAY['google'::text, 'cal_com'::text, 'outlook'::text])))""
                },
                {
                    ""name"": ""corev4_calendar_settings_max_days_ahead_check"",
                    ""expression"": ""(((max_days_ahead > 0) AND (max_days_ahead <= 90)))""
                },
                {
                    ""name"": ""corev4_calendar_settings_max_meetings_per_day_check"",
                    ""expression"": ""((max_meetings_per_day > 0))""
                },
                {
                    ""name"": ""corev4_calendar_settings_meeting_duration_minutes_check"",
                    ""expression"": ""(((meeting_duration_minutes > 0) AND (meeting_duration_minutes <= 240)))""
                },
                {
                    ""name"": ""corev4_calendar_settings_min_notice_hours_check"",
                    ""expression"": ""((min_notice_hours >= 0))""
                },
                {
                    ""name"": ""corev4_calendar_settings_offer_expiration_hours_check"",
                    ""expression"": ""((offer_expiration_hours > 0))""
                },
                {
                    ""name"": ""corev4_calendar_settings_slots_to_offer_check"",
                    ""expression"": ""(((slots_to_offer >= 2) AND (slots_to_offer <= 5)))""
                }
            ],
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_calendar_settings_company_id_key"",
                    ""columns"": [
                        ""company_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_campaign_executions"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_campaign_executions_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""campaign_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""prospect_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 3
                },
                {
                    ""name"": ""status"",
                    ""type"": ""text"",
                    ""default"": ""'pending'::text"",
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""first_touch_sent_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""first_touch_response"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""first_touch_button_clicked"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""current_nurture_step"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""nurture_history"",
                    ""type"": ""jsonb"",
                    ""default"": ""'[]'::jsonb"",
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""handed_off_to_frank"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""handoff_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 12
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_campaign_executions_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_campaign_executions_pkey ON public.corev4_campaign_executions USING btree (id)""
                },
                {
                    ""name"": ""corev4_campaign_executions_campaign_id_prospect_id_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_campaign_executions_campaign_id_prospect_id_key ON public.corev4_campaign_executions USING btree (campaign_id, prospect_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""campaign_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_campaign_executions_campaign_id_fkey"",
                    ""references_table"": ""corev4_outbound_campaigns"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""prospect_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_campaign_executions_prospect_id_fkey"",
                    ""references_table"": ""corev4_prospects"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_campaign_executions_campaign_id_prospect_id_key"",
                    ""columns"": [
                        ""campaign_id"",
                        ""prospect_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_chat_history"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_chat_history_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""session_id"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""role"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""message"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""message_type"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""media_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""media_mime_type"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""tokens_used"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""cost_usd"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""model_used"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""message_timestamp"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""has_media"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 15
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_chat_session_time"",
                    ""definition"": ""CREATE INDEX idx_chat_session_time ON public.corev4_chat_history USING btree (session_id, created_at DESC)""
                },
                {
                    ""name"": ""corev4_chat_history_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_chat_history_pkey ON public.corev4_chat_history USING btree (id)""
                },
                {
                    ""name"": ""idx_chat_history_session"",
                    ""definition"": ""CREATE INDEX idx_chat_history_session ON public.corev4_chat_history USING btree (session_id)""
                },
                {
                    ""name"": ""idx_chat_history_contact"",
                    ""definition"": ""CREATE INDEX idx_chat_history_contact ON public.corev4_chat_history USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_chat_history_contact_company"",
                    ""definition"": ""CREATE INDEX idx_chat_history_contact_company ON public.corev4_chat_history USING btree (contact_id, company_id)""
                },
                {
                    ""name"": ""idx_chat_history_has_media"",
                    ""definition"": ""CREATE INDEX idx_chat_history_has_media ON public.corev4_chat_history USING btree (has_media) WHERE (has_media = true)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_chat_history_contact"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_chat_history_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_chats"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_chats_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""agent_alias"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""last_message_ts"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""last_lead_message_ts"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""last_agent_message_ts"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""batch_collecting"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""batch_expires_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""conversation_open"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""closed_reason"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""batch_messages"",
                    ""type"": ""ARRAY"",
                    ""default"": ""'{}'::jsonb[]"",
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""conversation_state"",
                    ""type"": ""text"",
                    ""default"": ""'normal'::text"",
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""pending_offer_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""state_changed_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""state_data"",
                    ""type"": ""jsonb"",
                    ""default"": ""'{}'::jsonb"",
                    ""nullable"": true,
                    ""position"": 18
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_chats_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_chats_pkey ON public.corev4_chats USING btree (id)""
                },
                {
                    ""name"": ""unique_contact_chat"",
                    ""definition"": ""CREATE UNIQUE INDEX unique_contact_chat ON public.corev4_chats USING btree (contact_id, company_id)""
                },
                {
                    ""name"": ""idx_chats_contact"",
                    ""definition"": ""CREATE INDEX idx_chats_contact ON public.corev4_chats USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_chats_company"",
                    ""definition"": ""CREATE INDEX idx_chats_company ON public.corev4_chats USING btree (company_id)""
                },
                {
                    ""name"": ""idx_chats_open"",
                    ""definition"": ""CREATE INDEX idx_chats_open ON public.corev4_chats USING btree (conversation_open) WHERE (conversation_open = true)""
                },
                {
                    ""name"": ""idx_chats_batch"",
                    ""definition"": ""CREATE INDEX idx_chats_batch ON public.corev4_chats USING btree (batch_collecting) WHERE (batch_collecting = true)""
                },
                {
                    ""name"": ""idx_chats_last_message"",
                    ""definition"": ""CREATE INDEX idx_chats_last_message ON public.corev4_chats USING btree (last_message_ts DESC NULLS LAST)""
                },
                {
                    ""name"": ""idx_chats_conversation_open"",
                    ""definition"": ""CREATE INDEX idx_chats_conversation_open ON public.corev4_chats USING btree (conversation_open) WHERE (conversation_open = true)""
                },
                {
                    ""name"": ""idx_chats_batch_active"",
                    ""definition"": ""CREATE INDEX idx_chats_batch_active ON public.corev4_chats USING btree (batch_expires_at) WHERE ((batch_collecting = true) AND (batch_expires_at IS NOT NULL))""
                },
                {
                    ""name"": ""idx_chats_conversation_state"",
                    ""definition"": ""CREATE INDEX idx_chats_conversation_state ON public.corev4_chats USING btree (conversation_state) WHERE (conversation_state <> 'normal'::text)""
                },
                {
                    ""name"": ""idx_chats_pending_offer"",
                    ""definition"": ""CREATE INDEX idx_chats_pending_offer ON public.corev4_chats USING btree (pending_offer_id) WHERE (pending_offer_id IS NOT NULL)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""update_chats_updated_at"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION update_updated_at_column()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_chats_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_chats_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""pending_offer_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_chats_pending_offer"",
                    ""references_table"": ""corev4_pending_slot_offers"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""chk_conversation_state_valid"",
                    ""expression"": ""((conversation_state = ANY (ARRAY['normal'::text, 'awaiting_slot_selection'::text, 'confirming_slot'::text, 'confirming_booking'::text, 'booking_in_progress'::text, 'awaiting_reschedule'::text])))""
                }
            ],
            ""unique_constraints"": [
                {
                    ""name"": ""unique_contact_chat"",
                    ""columns"": [
                        ""contact_id"",
                        ""company_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_companies"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_companies_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""name"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""slug"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""evolution_api_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""evolution_instance"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""evolution_api_key"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""enable_anum_analysis"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""anum_threshold_qualified"",
                    ""type"": ""integer"",
                    ""default"": ""70"",
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""anum_threshold_disqualified"",
                    ""type"": ""integer"",
                    ""default"": ""20"",
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""enable_followup_campaigns"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""auto_create_campaigns"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""default_followup_config_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""contact_type_mode"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'leads_only'::character varying"",
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""enable_audio_responses"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""enable_media_processing"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""enable_command_processing"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""llm_model"",
                    ""type"": ""character varying(100)"",
                    ""default"": ""'gpt-4-turbo'::character varying"",
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""llm_temperature"",
                    ""type"": ""numeric"",
                    ""default"": ""0.7"",
                    ""nullable"": true,
                    ""position"": 20
                },
                {
                    ""name"": ""llm_max_tokens"",
                    ""type"": ""integer"",
                    ""default"": ""1000"",
                    ""nullable"": true,
                    ""position"": 21
                },
                {
                    ""name"": ""bot_name"",
                    ""type"": ""character varying(100)"",
                    ""default"": ""'Frank'::character varying"",
                    ""nullable"": true,
                    ""position"": 22
                },
                {
                    ""name"": ""bot_personality"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 23
                },
                {
                    ""name"": ""system_prompt"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 24
                },
                {
                    ""name"": ""greeting_message"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 25
                },
                {
                    ""name"": ""webhook_secret"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 26
                },
                {
                    ""name"": ""webhook_validation_enabled"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 27
                },
                {
                    ""name"": ""crm_integration"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 28
                },
                {
                    ""name"": ""crm_api_key"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 29
                },
                {
                    ""name"": ""crm_pipeline_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 30
                },
                {
                    ""name"": ""features"",
                    ""type"": ""jsonb"",
                    ""default"": ""'{}'::jsonb"",
                    ""nullable"": true,
                    ""position"": 31
                },
                {
                    ""name"": ""plan_tier"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'free'::character varying"",
                    ""nullable"": true,
                    ""position"": 32
                },
                {
                    ""name"": ""monthly_message_limit"",
                    ""type"": ""integer"",
                    ""default"": ""1000"",
                    ""nullable"": true,
                    ""position"": 33
                },
                {
                    ""name"": ""current_month_messages"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 34
                },
                {
                    ""name"": ""billing_email"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 35
                },
                {
                    ""name"": ""is_active"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 36
                },
                {
                    ""name"": ""suspended_reason"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 37
                },
                {
                    ""name"": ""trial_ends_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 38
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_companies_slug"",
                    ""definition"": ""CREATE INDEX idx_companies_slug ON public.corev4_companies USING btree (slug)""
                },
                {
                    ""name"": ""idx_companies_is_active"",
                    ""definition"": ""CREATE INDEX idx_companies_is_active ON public.corev4_companies USING btree (is_active)""
                },
                {
                    ""name"": ""idx_companies_plan_tier"",
                    ""definition"": ""CREATE INDEX idx_companies_plan_tier ON public.corev4_companies USING btree (plan_tier)""
                },
                {
                    ""name"": ""corev4_companies_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_companies_pkey ON public.corev4_companies USING btree (id)""
                },
                {
                    ""name"": ""corev4_companies_slug_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_companies_slug_key ON public.corev4_companies USING btree (slug)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""default_followup_config_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_companies_default_followup_config_id_fkey"",
                    ""references_table"": ""corev4_followup_configs"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""corev4_companies_anum_threshold_disqualified_check"",
                    ""expression"": ""(((anum_threshold_disqualified >= 0) AND (anum_threshold_disqualified <= 100)))""
                },
                {
                    ""name"": ""corev4_companies_anum_threshold_qualified_check"",
                    ""expression"": ""(((anum_threshold_qualified >= 0) AND (anum_threshold_qualified <= 100)))""
                },
                {
                    ""name"": ""corev4_companies_contact_type_mode_check"",
                    ""expression"": ""(((contact_type_mode)::text = ANY ((ARRAY['leads_only'::character varying, 'customers_only'::character varying, 'mixed'::character varying, 'saas_users'::character varying])::text[])))""
                },
                {
                    ""name"": ""corev4_companies_llm_max_tokens_check"",
                    ""expression"": ""((llm_max_tokens > 0))""
                },
                {
                    ""name"": ""corev4_companies_llm_temperature_check"",
                    ""expression"": ""(((llm_temperature >= 0.0) AND (llm_temperature <= 1.0)))""
                },
                {
                    ""name"": ""corev4_companies_plan_tier_check"",
                    ""expression"": ""(((plan_tier)::text = ANY ((ARRAY['free'::character varying, 'starter'::character varying, 'pro'::character varying, 'enterprise'::character varying, 'custom'::character varying])::text[])))""
                }
            ],
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_companies_slug_key"",
                    ""columns"": [
                        ""slug""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_consent_log"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_consent_log_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""prospect_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 3
                },
                {
                    ""name"": ""consent_type"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""consent_source"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""message_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""raw_response"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""consented_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 8
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_consent_log_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_consent_log_pkey ON public.corev4_consent_log USING btree (id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""prospect_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_consent_log_prospect_id_fkey"",
                    ""references_table"": ""corev4_prospects"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_consent_log_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_contact_extras"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_contact_extras_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""pipeline_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""crm_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""deals_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""thread_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""stripe_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""audio_response"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""text_response"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""interactions"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""last_interaction_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""plan_tier"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""evolution_api_contact"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 16
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_contact_extras_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_contact_extras_pkey ON public.corev4_contact_extras USING btree (id)""
                },
                {
                    ""name"": ""unique_contact_extras"",
                    ""definition"": ""CREATE UNIQUE INDEX unique_contact_extras ON public.corev4_contact_extras USING btree (contact_id, company_id)""
                },
                {
                    ""name"": ""idx_extras_contact"",
                    ""definition"": ""CREATE INDEX idx_extras_contact ON public.corev4_contact_extras USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_extras_company"",
                    ""definition"": ""CREATE INDEX idx_extras_company ON public.corev4_contact_extras USING btree (company_id)""
                },
                {
                    ""name"": ""idx_extras_crm"",
                    ""definition"": ""CREATE INDEX idx_extras_crm ON public.corev4_contact_extras USING btree (crm_id) WHERE (crm_id IS NOT NULL)""
                },
                {
                    ""name"": ""idx_extras_stripe"",
                    ""definition"": ""CREATE INDEX idx_extras_stripe ON public.corev4_contact_extras USING btree (stripe_id) WHERE (stripe_id IS NOT NULL)""
                },
                {
                    ""name"": ""idx_extras_last_interaction"",
                    ""definition"": ""CREATE INDEX idx_extras_last_interaction ON public.corev4_contact_extras USING btree (last_interaction_at DESC NULLS LAST)""
                },
                {
                    ""name"": ""idx_contact_extras_contact"",
                    ""definition"": ""CREATE INDEX idx_contact_extras_contact ON public.corev4_contact_extras USING btree (contact_id, company_id)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""update_contact_extras_updated_at"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION update_updated_at_column()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_contact_extras_contact"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_contact_extras_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""corev4_contact_extras_interactions_check"",
                    ""expression"": ""((interactions >= 0))""
                },
                {
                    ""name"": ""corev4_contact_extras_plan_tier_check"",
                    ""expression"": ""((plan_tier >= 0))""
                }
            ],
            ""unique_constraints"": [
                {
                    ""name"": ""unique_contact_extras"",
                    ""columns"": [
                        ""contact_id"",
                        ""company_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_contacts"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_contacts_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""full_name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""whatsapp"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""phone_number"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""email"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""origin_source"",
                    ""type"": ""text"",
                    ""default"": ""'whatsapp'::text"",
                    ""nullable"": false,
                    ""position"": 7
                },
                {
                    ""name"": ""utm_source"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""utm_medium"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""utm_campaign"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""utm_adgroup"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""utm_creative"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""sector"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""tags"",
                    ""type"": ""ARRAY"",
                    ""default"": ""'{}'::text[]"",
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""opt_out"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""is_active"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""last_interaction_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 19
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_contacts_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_contacts_pkey ON public.corev4_contacts USING btree (id)""
                },
                {
                    ""name"": ""unique_whatsapp_company"",
                    ""definition"": ""CREATE UNIQUE INDEX unique_whatsapp_company ON public.corev4_contacts USING btree (whatsapp, company_id)""
                },
                {
                    ""name"": ""idx_contacts_company"",
                    ""definition"": ""CREATE INDEX idx_contacts_company ON public.corev4_contacts USING btree (company_id)""
                },
                {
                    ""name"": ""idx_contacts_whatsapp"",
                    ""definition"": ""CREATE INDEX idx_contacts_whatsapp ON public.corev4_contacts USING btree (whatsapp)""
                },
                {
                    ""name"": ""idx_contacts_email"",
                    ""definition"": ""CREATE INDEX idx_contacts_email ON public.corev4_contacts USING btree (email) WHERE (email IS NOT NULL)""
                },
                {
                    ""name"": ""idx_contacts_active"",
                    ""definition"": ""CREATE INDEX idx_contacts_active ON public.corev4_contacts USING btree (is_active) WHERE (is_active = true)""
                },
                {
                    ""name"": ""idx_contacts_opt_out"",
                    ""definition"": ""CREATE INDEX idx_contacts_opt_out ON public.corev4_contacts USING btree (opt_out) WHERE (opt_out = false)""
                },
                {
                    ""name"": ""idx_contacts_last_interaction"",
                    ""definition"": ""CREATE INDEX idx_contacts_last_interaction ON public.corev4_contacts USING btree (last_interaction_at DESC NULLS LAST)""
                },
                {
                    ""name"": ""idx_contacts_full_name_trgm"",
                    ""definition"": ""CREATE INDEX idx_contacts_full_name_trgm ON public.corev4_contacts USING gin (full_name gin_trgm_ops)""
                },
                {
                    ""name"": ""idx_contacts_created"",
                    ""definition"": ""CREATE INDEX idx_contacts_created ON public.corev4_contacts USING btree (created_at DESC)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""trigger_reagendar_followups"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""AFTER"",
                    ""statement"": ""EXECUTE FUNCTION reagendar_followups_on_interaction()""
                },
                {
                    ""name"": ""update_contacts_updated_at"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION update_updated_at_column()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_contacts_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": [
                {
                    ""name"": ""tenant_isolation_contacts"",
                    ""using"": ""(company_id = (current_setting('app.current_company_id'::text, true))::integer)"",
                    ""command"": ""ALL"",
                    ""permissive"": ""PERMISSIVE"",
                    ""with_check"": null
                }
            ],
            ""check_constraints"": [
                {
                    ""name"": ""valid_email"",
                    ""expression"": ""(((email IS NULL) OR (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$'::text)))""
                },
                {
                    ""name"": ""valid_phone"",
                    ""expression"": ""(((phone_number IS NULL) OR (length(phone_number) >= 10)))""
                }
            ],
            ""unique_constraints"": [
                {
                    ""name"": ""unique_whatsapp_company"",
                    ""columns"": [
                        ""whatsapp"",
                        ""company_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_execution_logs"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_execution_logs_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""workflow_name"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""execution_id"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 3
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""followup_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""action_taken"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""success"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""error_message"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""details"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""duration_ms"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 11
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_logs_workflow_time"",
                    ""definition"": ""CREATE INDEX idx_logs_workflow_time ON public.corev4_execution_logs USING btree (workflow_name, created_at DESC)""
                },
                {
                    ""name"": ""corev4_execution_logs_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_execution_logs_pkey ON public.corev4_execution_logs USING btree (id)""
                },
                {
                    ""name"": ""idx_execution_logs_workflow"",
                    ""definition"": ""CREATE INDEX idx_execution_logs_workflow ON public.corev4_execution_logs USING btree (workflow_name)""
                },
                {
                    ""name"": ""idx_execution_logs_contact"",
                    ""definition"": ""CREATE INDEX idx_execution_logs_contact ON public.corev4_execution_logs USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_execution_logs_followup"",
                    ""definition"": ""CREATE INDEX idx_execution_logs_followup ON public.corev4_execution_logs USING btree (followup_id)""
                },
                {
                    ""name"": ""idx_execution_logs_success"",
                    ""definition"": ""CREATE INDEX idx_execution_logs_success ON public.corev4_execution_logs USING btree (success)""
                },
                {
                    ""name"": ""idx_execution_logs_created"",
                    ""definition"": ""CREATE INDEX idx_execution_logs_created ON public.corev4_execution_logs USING btree (created_at DESC)""
                },
                {
                    ""name"": ""idx_logs_analytics"",
                    ""definition"": ""CREATE INDEX idx_logs_analytics ON public.corev4_execution_logs USING btree (success, workflow_name, created_at DESC) WHERE (success = true)""
                },
                {
                    ""name"": ""idx_logs_errors"",
                    ""definition"": ""CREATE INDEX idx_logs_errors ON public.corev4_execution_logs USING btree (success, workflow_name, created_at DESC) WHERE (success = false)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_contact"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""followup_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_followup"",
                    ""references_table"": ""corev4_followup_executions"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_execution_logs_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_followup_campaigns"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_followup_campaigns_id_seq1'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""config_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""status"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'active'::character varying"",
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""pause_reason"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""steps_completed"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""total_steps"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 8
                },
                {
                    ""name"": ""last_step_sent_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""should_continue"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""stopped_reason"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 13
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_followup_campaigns_pkey1"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_campaigns_pkey1 ON public.corev4_followup_campaigns USING btree (id)""
                },
                {
                    ""name"": ""idx_campaigns_contact"",
                    ""definition"": ""CREATE INDEX idx_campaigns_contact ON public.corev4_followup_campaigns USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_campaigns_company"",
                    ""definition"": ""CREATE INDEX idx_campaigns_company ON public.corev4_followup_campaigns USING btree (company_id)""
                },
                {
                    ""name"": ""idx_campaigns_config"",
                    ""definition"": ""CREATE INDEX idx_campaigns_config ON public.corev4_followup_campaigns USING btree (config_id)""
                },
                {
                    ""name"": ""idx_campaigns_status"",
                    ""definition"": ""CREATE INDEX idx_campaigns_status ON public.corev4_followup_campaigns USING btree (status)""
                },
                {
                    ""name"": ""idx_campaigns_active"",
                    ""definition"": ""CREATE INDEX idx_campaigns_active ON public.corev4_followup_campaigns USING btree (should_continue) WHERE (should_continue = true)""
                },
                {
                    ""name"": ""idx_followup_campaigns_status"",
                    ""definition"": ""CREATE INDEX idx_followup_campaigns_status ON public.corev4_followup_campaigns USING btree (status, company_id, should_continue)""
                },
                {
                    ""name"": ""idx_followup_campaigns_contact"",
                    ""definition"": ""CREATE INDEX idx_followup_campaigns_contact ON public.corev4_followup_campaigns USING btree (contact_id, company_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_followup_campaigns_contact"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_followup_campaigns_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""config_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_followup_campaigns_config"",
                    ""references_table"": ""corev4_followup_configs"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_followup_configs"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_followup_configs_id_seq1'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""config_name"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""total_steps"",
                    ""type"": ""integer"",
                    ""default"": ""5"",
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""qualification_threshold"",
                    ""type"": ""integer"",
                    ""default"": ""60"",
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""disqualification_threshold"",
                    ""type"": ""integer"",
                    ""default"": ""15"",
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""max_no_response_days"",
                    ""type"": ""integer"",
                    ""default"": ""30"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""is_active"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 17
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_followup_configs_pkey1"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_configs_pkey1 ON public.corev4_followup_configs USING btree (id)""
                },
                {
                    ""name"": ""idx_followup_configs_company"",
                    ""definition"": ""CREATE INDEX idx_followup_configs_company ON public.corev4_followup_configs USING btree (company_id)""
                },
                {
                    ""name"": ""idx_followup_configs_active"",
                    ""definition"": ""CREATE INDEX idx_followup_configs_active ON public.corev4_followup_configs USING btree (is_active) WHERE (is_active = true)""
                },
                {
                    ""name"": ""corev4_followup_configs_company_name_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_configs_company_name_key ON public.corev4_followup_configs USING btree (company_id, config_name)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_followup_configs_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_followup_configs_company_name_key"",
                    ""columns"": [
                        ""company_id"",
                        ""config_name""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_followup_executions"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_followup_executions_id_seq1'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""campaign_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""step"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""total_steps"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 6
                },
                {
                    ""name"": ""scheduled_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 7
                },
                {
                    ""name"": ""executed"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""sent_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""generated_message"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""generation_context"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""should_send"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""decision_reason"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""anum_at_execution"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""evolution_message_id"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""evolution_api_url"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""evolution_instance"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 19
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_executions_lookup"",
                    ""definition"": ""CREATE INDEX idx_executions_lookup ON public.corev4_followup_executions USING btree (company_id, contact_id, executed) WHERE (executed = false)""
                },
                {
                    ""name"": ""corev4_followup_executions_pkey1"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_executions_pkey1 ON public.corev4_followup_executions USING btree (id)""
                },
                {
                    ""name"": ""idx_executions_campaign"",
                    ""definition"": ""CREATE INDEX idx_executions_campaign ON public.corev4_followup_executions USING btree (campaign_id)""
                },
                {
                    ""name"": ""idx_executions_contact"",
                    ""definition"": ""CREATE INDEX idx_executions_contact ON public.corev4_followup_executions USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_executions_pending"",
                    ""definition"": ""CREATE INDEX idx_executions_pending ON public.corev4_followup_executions USING btree (executed, scheduled_at, should_send) WHERE ((executed = false) AND (should_send = true))""
                },
                {
                    ""name"": ""idx_executions_scheduled"",
                    ""definition"": ""CREATE INDEX idx_executions_scheduled ON public.corev4_followup_executions USING btree (scheduled_at)""
                },
                {
                    ""name"": ""idx_followup_executions_pending"",
                    ""definition"": ""CREATE INDEX idx_followup_executions_pending ON public.corev4_followup_executions USING btree (scheduled_at, executed, company_id) WHERE (executed = false)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""adjust_business_hours_on_insert"",
                    ""event"": ""INSERT"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION adjust_followup_execution_business_hours()""
                },
                {
                    ""name"": ""adjust_business_hours_on_update"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION adjust_followup_execution_business_hours()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""campaign_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_followup_executions_campaign"",
                    ""references_table"": ""corev4_followup_campaigns"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_followup_executions_contact"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_followup_executions_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_followup_sequences"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_followup_sequences_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""campaign_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""step_number"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""interval_hours"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""message_template"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""min_anum_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""max_anum_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""required_stage"",
                    ""type"": ""character varying(20)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 9
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_followup_sequences_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_sequences_pkey ON public.corev4_followup_sequences USING btree (id)""
                },
                {
                    ""name"": ""corev4_followup_sequences_campaign_id_step_number_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_sequences_campaign_id_step_number_key ON public.corev4_followup_sequences USING btree (campaign_id, step_number)""
                },
                {
                    ""name"": ""idx_followup_sequences_campaign"",
                    ""definition"": ""CREATE INDEX idx_followup_sequences_campaign ON public.corev4_followup_sequences USING btree (campaign_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""campaign_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_sequences_campaign"",
                    ""references_table"": ""corev4_followup_campaigns"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_followup_sequences_campaign_id_step_number_key"",
                    ""columns"": [
                        ""campaign_id"",
                        ""step_number""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_followup_stage_history"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_followup_stage_history_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 3
                },
                {
                    ""name"": ""followup_execution_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""old_stage"",
                    ""type"": ""character varying(20)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""new_stage"",
                    ""type"": ""character varying(20)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""changed_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""changed_by"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""notes"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 10
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_followup_stage_history_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_stage_history_pkey ON public.corev4_followup_stage_history USING btree (id)""
                },
                {
                    ""name"": ""idx_followup_stage_hist_contact"",
                    ""definition"": ""CREATE INDEX idx_followup_stage_hist_contact ON public.corev4_followup_stage_history USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_followup_stage_hist_exec"",
                    ""definition"": ""CREATE INDEX idx_followup_stage_hist_exec ON public.corev4_followup_stage_history USING btree (followup_execution_id)""
                },
                {
                    ""name"": ""idx_followup_stage_hist_changed"",
                    ""definition"": ""CREATE INDEX idx_followup_stage_hist_changed ON public.corev4_followup_stage_history USING btree (changed_at DESC)""
                },
                {
                    ""name"": ""idx_followup_stage_history_created"",
                    ""definition"": ""CREATE INDEX idx_followup_stage_history_created ON public.corev4_followup_stage_history USING btree (created_at DESC)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""followup_execution_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_stage_history_execution"",
                    ""references_table"": ""corev4_followup_executions"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_followup_stage_history_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_followup_stage_history_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_followup_steps"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_followup_steps_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""config_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""step_number"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""wait_hours"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""wait_minutes"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 7
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_followup_steps_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_followup_steps_pkey ON public.corev4_followup_steps USING btree (id)""
                },
                {
                    ""name"": ""unique_step_per_config"",
                    ""definition"": ""CREATE UNIQUE INDEX unique_step_per_config ON public.corev4_followup_steps USING btree (config_id, step_number)""
                },
                {
                    ""name"": ""idx_followup_steps_config"",
                    ""definition"": ""CREATE INDEX idx_followup_steps_config ON public.corev4_followup_steps USING btree (config_id)""
                },
                {
                    ""name"": ""idx_followup_steps_step"",
                    ""definition"": ""CREATE INDEX idx_followup_steps_step ON public.corev4_followup_steps USING btree (step_number)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""config_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_followup_steps_config_id_fkey"",
                    ""references_table"": ""corev4_followup_configs"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""valid_step_number"",
                    ""expression"": ""((step_number > 0))""
                },
                {
                    ""name"": ""valid_timing"",
                    ""expression"": ""(((wait_hours >= 0) AND (wait_minutes >= 0)))""
                }
            ],
            ""unique_constraints"": [
                {
                    ""name"": ""unique_step_per_config"",
                    ""columns"": [
                        ""config_id"",
                        ""step_number""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_lead_state"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_lead_state_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""authority_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""need_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""urgency_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""money_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""total_score"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""qualification_stage"",
                    ""type"": ""character varying(20)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""status"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'cold'::character varying"",
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""last_analyzed_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""analysis_count"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""is_qualified"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 20
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 21
                },
                {
                    ""name"": ""analyzed_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 22
                },
                {
                    ""name"": ""last_analysis_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 23
                },
                {
                    ""name"": ""main_pain_category_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 24
                },
                {
                    ""name"": ""main_pain_detail"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 25
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_lead_state_contact_id_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_lead_state_contact_id_key ON public.corev4_lead_state USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_lead_state_contact"",
                    ""definition"": ""CREATE INDEX idx_lead_state_contact ON public.corev4_lead_state USING btree (contact_id)""
                },
                {
                    ""name"": ""corev4_lead_state_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_lead_state_pkey ON public.corev4_lead_state USING btree (id)""
                },
                {
                    ""name"": ""idx_lead_state_company"",
                    ""definition"": ""CREATE INDEX idx_lead_state_company ON public.corev4_lead_state USING btree (company_id)""
                },
                {
                    ""name"": ""idx_lead_state_total_score"",
                    ""definition"": ""CREATE INDEX idx_lead_state_total_score ON public.corev4_lead_state USING btree (total_score DESC)""
                },
                {
                    ""name"": ""idx_lead_state_stage"",
                    ""definition"": ""CREATE INDEX idx_lead_state_stage ON public.corev4_lead_state USING btree (qualification_stage)""
                },
                {
                    ""name"": ""idx_lead_state_last_analyzed"",
                    ""definition"": ""CREATE INDEX idx_lead_state_last_analyzed ON public.corev4_lead_state USING btree (last_analyzed_at)""
                },
                {
                    ""name"": ""idx_lead_state_pain_category"",
                    ""definition"": ""CREATE INDEX idx_lead_state_pain_category ON public.corev4_lead_state USING btree (main_pain_category_id)""
                },
                {
                    ""name"": ""idx_lead_state_qualified"",
                    ""definition"": ""CREATE INDEX idx_lead_state_qualified ON public.corev4_lead_state USING btree (is_qualified, company_id, total_score DESC)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""calculate_lead_state_score"",
                    ""event"": ""INSERT"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION calculate_anum_total_score()""
                },
                {
                    ""name"": ""calculate_lead_state_score"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION calculate_anum_total_score()""
                },
                {
                    ""name"": ""update_lead_state_updated_at"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION update_updated_at_column()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_lead_state_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_lead_state_contact"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""main_pain_category_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_lead_state_main_pain_category_id_fkey"",
                    ""references_table"": ""corev4_pain_categories"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""check_main_pain_detail_length"",
                    ""expression"": ""((length(main_pain_detail) <= 200))""
                },
                {
                    ""name"": ""corev4_lead_state_authority_score_check"",
                    ""expression"": ""(((authority_score >= 0) AND (authority_score <= 100)))""
                },
                {
                    ""name"": ""corev4_lead_state_money_score_check"",
                    ""expression"": ""(((money_score >= 0) AND (money_score <= 100)))""
                },
                {
                    ""name"": ""corev4_lead_state_need_score_check"",
                    ""expression"": ""(((need_score >= 0) AND (need_score <= 100)))""
                },
                {
                    ""name"": ""corev4_lead_state_qualification_stage_check"",
                    ""expression"": ""(((qualification_stage)::text = ANY ((ARRAY['pre'::character varying, 'partial'::character varying, 'full'::character varying, 'rejected'::character varying])::text[])))""
                },
                {
                    ""name"": ""corev4_lead_state_urgency_score_check"",
                    ""expression"": ""(((urgency_score >= 0) AND (urgency_score <= 100)))""
                }
            ],
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_lead_state_contact_id_key"",
                    ""columns"": [
                        ""contact_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_meeting_offers"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_meeting_offers_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""offered_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""offered_by"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'frank_ai'::character varying"",
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""offered_in_flow"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""anum_score_at_offer"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""authority_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""need_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""urgency_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""money_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""qualification_stage"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""link_sent"",
                    ""type"": ""text"",
                    ""default"": ""'https://cal.com/francisco-pasteur-coreadapt/mesa-de-clareza-45min'::text"",
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""lead_clicked"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""lead_clicked_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""lead_booked"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""lead_booked_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""booking_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""offer_message"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 20
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 21
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_meeting_offers_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_meeting_offers_pkey ON public.corev4_meeting_offers USING btree (id)""
                },
                {
                    ""name"": ""idx_meeting_offers_contact"",
                    ""definition"": ""CREATE INDEX idx_meeting_offers_contact ON public.corev4_meeting_offers USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_meeting_offers_company"",
                    ""definition"": ""CREATE INDEX idx_meeting_offers_company ON public.corev4_meeting_offers USING btree (company_id)""
                },
                {
                    ""name"": ""idx_meeting_offers_offered_at"",
                    ""definition"": ""CREATE INDEX idx_meeting_offers_offered_at ON public.corev4_meeting_offers USING btree (offered_at DESC)""
                },
                {
                    ""name"": ""idx_meeting_offers_booked"",
                    ""definition"": ""CREATE INDEX idx_meeting_offers_booked ON public.corev4_meeting_offers USING btree (lead_booked) WHERE (lead_booked = true)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""set_timestamp_meeting_offers"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION trigger_set_timestamp()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_meeting_offers_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_meeting_offers_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""booking_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_meeting_offers_booking"",
                    ""references_table"": ""corev4_scheduled_meetings"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_message_dedup"",
            ""columns"": [
                {
                    ""name"": ""message_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""whatsapp_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 3
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""received_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""processed"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""workflow_execution_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""received_at_second"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 9
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_message_dedup_created"",
                    ""definition"": ""CREATE INDEX idx_message_dedup_created ON public.corev4_message_dedup USING btree (created_at)""
                },
                {
                    ""name"": ""idx_message_dedup_whatsapp_time"",
                    ""definition"": ""CREATE INDEX idx_message_dedup_whatsapp_time ON public.corev4_message_dedup USING btree (whatsapp_id, received_at DESC, company_id)""
                },
                {
                    ""name"": ""corev4_message_dedup_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_message_dedup_pkey ON public.corev4_message_dedup USING btree (message_id)""
                },
                {
                    ""name"": ""idx_dedup_received"",
                    ""definition"": ""CREATE INDEX idx_dedup_received ON public.corev4_message_dedup USING btree (received_at DESC)""
                },
                {
                    ""name"": ""idx_dedup_contact"",
                    ""definition"": ""CREATE INDEX idx_dedup_contact ON public.corev4_message_dedup USING btree (contact_id, received_at DESC)""
                },
                {
                    ""name"": ""idx_dedup_whatsapp_second"",
                    ""definition"": ""CREATE UNIQUE INDEX idx_dedup_whatsapp_second ON public.corev4_message_dedup USING btree (whatsapp_id, received_at_second)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""message_id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_message_dedup_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""fk_dedup_contact"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_message_media"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_message_media_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""message_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""storage_provider"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 3
                },
                {
                    ""name"": ""storage_path"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""storage_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""original_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""media_type"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""mime_type"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""file_size"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""width"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""height"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""thumbnail_path"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""embedding"",
                    ""type"": ""USER-DEFINED"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""ocr_text"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""transcription"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""ai_description"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""ai_tags"",
                    ""type"": ""ARRAY"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 19
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_message_media_message"",
                    ""definition"": ""CREATE INDEX idx_message_media_message ON public.corev4_message_media USING btree (message_id, company_id)""
                },
                {
                    ""name"": ""corev4_message_media_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_message_media_pkey ON public.corev4_message_media USING btree (id)""
                },
                {
                    ""name"": ""idx_message_media_company_message"",
                    ""definition"": ""CREATE INDEX idx_message_media_company_message ON public.corev4_message_media USING btree (company_id, message_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""message_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_message_media_message"",
                    ""references_table"": ""corev4_chat_history"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""CASCADE"",
                    ""constraint"": ""fk_message_media_company"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": [
                {
                    ""name"": ""tenant_isolation_message_media"",
                    ""using"": ""(company_id = (current_setting('app.current_company_id'::text, true))::integer)"",
                    ""command"": ""ALL"",
                    ""permissive"": ""PERMISSIVE"",
                    ""with_check"": null
                }
            ],
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_message_templates"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""category"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""content_type"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""content"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 6
                },
                {
                    ""name"": ""variables"",
                    ""type"": ""ARRAY"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""usage_count"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""is_active"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 10
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_message_templates_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_message_templates_pkey ON public.corev4_message_templates USING btree (id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_message_templates_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_n8n_chat_histories"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_n8n_chat_histories_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""session_id"",
                    ""type"": ""character varying(255)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""message"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 5
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""idx_n8n_chat_created"",
                    ""definition"": ""CREATE INDEX idx_n8n_chat_created ON public.corev4_n8n_chat_histories USING btree (created_at DESC)""
                },
                {
                    ""name"": ""corev4_n8n_chat_histories_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_n8n_chat_histories_pkey ON public.corev4_n8n_chat_histories USING btree (id)""
                },
                {
                    ""name"": ""idx_n8n_chat_histories_session"",
                    ""definition"": ""CREATE INDEX idx_n8n_chat_histories_session ON public.corev4_n8n_chat_histories USING btree (session_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": null,
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_outbound_campaigns"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_outbound_campaigns_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""campaign_code"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""campaign_type"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""settings"",
                    ""type"": ""jsonb"",
                    ""default"": ""'{}'::jsonb"",
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""goals"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""status"",
                    ""type"": ""text"",
                    ""default"": ""'draft'::text"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""scheduled_start"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""actual_start"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""metrics"",
                    ""type"": ""jsonb"",
                    ""default"": ""'{}'::jsonb"",
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 12
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_outbound_campaigns_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_outbound_campaigns_pkey ON public.corev4_outbound_campaigns USING btree (id)""
                },
                {
                    ""name"": ""corev4_outbound_campaigns_campaign_code_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_outbound_campaigns_campaign_code_key ON public.corev4_outbound_campaigns USING btree (campaign_code)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_outbound_campaigns_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_outbound_campaigns_campaign_code_key"",
                    ""columns"": [
                        ""campaign_code""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_pain_categories"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_pain_categories_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""category_key"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""category_label_pt"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""category_label_en"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""keywords"",
                    ""type"": ""ARRAY"",
                    ""default"": ""ARRAY[]::text[]"",
                    ""nullable"": false,
                    ""position"": 6
                },
                {
                    ""name"": ""description"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""is_active"",
                    ""type"": ""boolean"",
                    ""default"": ""true"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""display_order"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 11
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_pain_categories_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_pain_categories_pkey ON public.corev4_pain_categories USING btree (id)""
                },
                {
                    ""name"": ""unique_company_category"",
                    ""definition"": ""CREATE UNIQUE INDEX unique_company_category ON public.corev4_pain_categories USING btree (company_id, category_key)""
                },
                {
                    ""name"": ""idx_pain_categories_company"",
                    ""definition"": ""CREATE INDEX idx_pain_categories_company ON public.corev4_pain_categories USING btree (company_id)""
                },
                {
                    ""name"": ""idx_pain_categories_active"",
                    ""definition"": ""CREATE INDEX idx_pain_categories_active ON public.corev4_pain_categories USING btree (company_id, is_active)""
                },
                {
                    ""name"": ""idx_pain_categories_key"",
                    ""definition"": ""CREATE INDEX idx_pain_categories_key ON public.corev4_pain_categories USING btree (category_key)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_pain_categories_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""unique_company_category"",
                    ""columns"": [
                        ""company_id"",
                        ""category_key""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_pending_slot_offers"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_pending_slot_offers_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""offered_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""expires_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""(now() + '24:00:00'::interval)"",
                    ""nullable"": false,
                    ""position"": 5
                },
                {
                    ""name"": ""slot_1_datetime"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 6
                },
                {
                    ""name"": ""slot_1_label"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""slot_2_datetime"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 8
                },
                {
                    ""name"": ""slot_2_label"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""slot_3_datetime"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""slot_3_label"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""slot_4_datetime"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""slot_4_label"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""slot_5_datetime"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""slot_5_label"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""offer_timezone"",
                    ""type"": ""text"",
                    ""default"": ""'America/Sao_Paulo'::text"",
                    ""nullable"": false,
                    ""position"": 16
                },
                {
                    ""name"": ""offer_message_sent"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""selected_slot"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""selection_message"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""selection_confidence"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 20
                },
                {
                    ""name"": ""selected_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 21
                },
                {
                    ""name"": ""status"",
                    ""type"": ""text"",
                    ""default"": ""'pending'::text"",
                    ""nullable"": false,
                    ""position"": 22
                },
                {
                    ""name"": ""booking_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 23
                },
                {
                    ""name"": ""booking_created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 24
                },
                {
                    ""name"": ""anum_score_at_offer"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 25
                },
                {
                    ""name"": ""conversation_context"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 26
                },
                {
                    ""name"": ""parsing_attempts"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 27
                },
                {
                    ""name"": ""last_parsing_result"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 28
                },
                {
                    ""name"": ""cancellation_reason"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 29
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 30
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": false,
                    ""position"": 31
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_pending_slot_offers_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_pending_slot_offers_pkey ON public.corev4_pending_slot_offers USING btree (id)""
                },
                {
                    ""name"": ""idx_pending_slots_contact"",
                    ""definition"": ""CREATE INDEX idx_pending_slots_contact ON public.corev4_pending_slot_offers USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_pending_slots_pending"",
                    ""definition"": ""CREATE INDEX idx_pending_slots_pending ON public.corev4_pending_slot_offers USING btree (status, expires_at) WHERE (status = 'pending'::text)""
                },
                {
                    ""name"": ""idx_pending_slots_company"",
                    ""definition"": ""CREATE INDEX idx_pending_slots_company ON public.corev4_pending_slot_offers USING btree (company_id)""
                },
                {
                    ""name"": ""idx_pending_slots_expiring"",
                    ""definition"": ""CREATE INDEX idx_pending_slots_expiring ON public.corev4_pending_slot_offers USING btree (expires_at) WHERE (status = 'pending'::text)""
                },
                {
                    ""name"": ""idx_pending_slots_booking"",
                    ""definition"": ""CREATE INDEX idx_pending_slots_booking ON public.corev4_pending_slot_offers USING btree (booking_id) WHERE (booking_id IS NOT NULL)""
                },
                {
                    ""name"": ""idx_pending_offers_contact"",
                    ""definition"": ""CREATE INDEX idx_pending_offers_contact ON public.corev4_pending_slot_offers USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_pending_offers_status"",
                    ""definition"": ""CREATE INDEX idx_pending_offers_status ON public.corev4_pending_slot_offers USING btree (status) WHERE (status = ANY (ARRAY['pending'::text, 'needs_confirmation'::text]))""
                },
                {
                    ""name"": ""idx_pending_offers_expires"",
                    ""definition"": ""CREATE INDEX idx_pending_offers_expires ON public.corev4_pending_slot_offers USING btree (expires_at) WHERE (status = 'pending'::text)""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""trg_pending_slots_updated_at"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION update_pending_slot_offers_timestamp()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_pending_slot_offers_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_pending_slot_offers_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""booking_id"",
                    ""on_delete"": ""SET NULL"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_pending_slot_offers_booking_id_fkey"",
                    ""references_table"": ""corev4_scheduled_meetings"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": [
                {
                    ""name"": ""corev4_pending_slot_offers_selected_slot_check"",
                    ""expression"": ""(((selected_slot IS NULL) OR ((selected_slot >= 1) AND (selected_slot <= 5))))""
                },
                {
                    ""name"": ""corev4_pending_slot_offers_selection_confidence_check"",
                    ""expression"": ""(((selection_confidence IS NULL) OR ((selection_confidence >= (0)::numeric) AND (selection_confidence <= (1)::numeric))))""
                },
                {
                    ""name"": ""corev4_pending_slot_offers_status_check"",
                    ""expression"": ""((status = ANY (ARRAY['pending'::text, 'selected'::text, 'confirmed'::text, 'expired'::text, 'cancelled'::text, 'slot_unavailable'::text, 'needs_confirmation'::text])))""
                }
            ],
            ""unique_constraints"": null
        },
        {
            ""name"": ""corev4_prospects"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""bigint"",
                    ""default"": ""nextval('corev4_prospects_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""full_name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""phone_number"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""email"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""company_name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""job_title"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""source_type"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 8
                },
                {
                    ""name"": ""source_reference"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""imported_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""validation_status"",
                    ""type"": ""text"",
                    ""default"": ""'new'::text"",
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""whatsapp_exists"",
                    ""type"": ""boolean"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""prospect_score"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""tier"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""status"",
                    ""type"": ""text"",
                    ""default"": ""'new'::text"",
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""converted_to_contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""google_rating"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""google_reviews"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""website"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""site_summary"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 20
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 21
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 22
                },
                {
                    ""name"": ""address_street"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 23
                },
                {
                    ""name"": ""address_number"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 24
                },
                {
                    ""name"": ""address_complement"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 25
                },
                {
                    ""name"": ""address_neighborhood"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 26
                },
                {
                    ""name"": ""city"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 27
                },
                {
                    ""name"": ""state"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 28
                },
                {
                    ""name"": ""zipcode"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 29
                },
                {
                    ""name"": ""country"",
                    ""type"": ""text"",
                    ""default"": ""'BR'::text"",
                    ""nullable"": true,
                    ""position"": 30
                },
                {
                    ""name"": ""latitude"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 31
                },
                {
                    ""name"": ""longitude"",
                    ""type"": ""numeric"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 32
                },
                {
                    ""name"": ""linkedin_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 33
                },
                {
                    ""name"": ""instagram_handle"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 34
                },
                {
                    ""name"": ""facebook_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 35
                },
                {
                    ""name"": ""business_type"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 36
                },
                {
                    ""name"": ""business_category"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 37
                },
                {
                    ""name"": ""business_subcategory"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 38
                },
                {
                    ""name"": ""secondary_phone"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 39
                },
                {
                    ""name"": ""whatsapp_validated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 40
                },
                {
                    ""name"": ""google_place_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 41
                },
                {
                    ""name"": ""google_maps_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 42
                },
                {
                    ""name"": ""google_photos_count"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 43
                },
                {
                    ""name"": ""enriched_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 44
                },
                {
                    ""name"": ""enrichment_source"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 45
                },
                {
                    ""name"": ""enrichment_data"",
                    ""type"": ""jsonb"",
                    ""default"": ""'{}'::jsonb"",
                    ""nullable"": true,
                    ""position"": 46
                },
                {
                    ""name"": ""campaign_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 47
                },
                {
                    ""name"": ""list_name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 48
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_prospects_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_prospects_pkey ON public.corev4_prospects USING btree (id)""
                },
                {
                    ""name"": ""corev4_prospects_phone_number_company_id_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_prospects_phone_number_company_id_key ON public.corev4_prospects USING btree (phone_number, company_id)""
                },
                {
                    ""name"": ""idx_prospects_city"",
                    ""definition"": ""CREATE INDEX idx_prospects_city ON public.corev4_prospects USING btree (city)""
                },
                {
                    ""name"": ""idx_prospects_state"",
                    ""definition"": ""CREATE INDEX idx_prospects_state ON public.corev4_prospects USING btree (state)""
                },
                {
                    ""name"": ""idx_prospects_business_type"",
                    ""definition"": ""CREATE INDEX idx_prospects_business_type ON public.corev4_prospects USING btree (business_type)""
                },
                {
                    ""name"": ""idx_prospects_campaign"",
                    ""definition"": ""CREATE INDEX idx_prospects_campaign ON public.corev4_prospects USING btree (campaign_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""campaign_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_prospects_campaign_id_fkey"",
                    ""references_table"": ""corev4_outbound_campaigns"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_prospects_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""converted_to_contact_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_prospects_converted_to_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_prospects_phone_number_company_id_key"",
                    ""columns"": [
                        ""phone_number"",
                        ""company_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_scheduled_meetings"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_scheduled_meetings_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""bigint"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""meeting_date"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 4
                },
                {
                    ""name"": ""meeting_end_date"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""meeting_duration_minutes"",
                    ""type"": ""integer"",
                    ""default"": ""45"",
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""meeting_type"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'mesa_clareza'::character varying"",
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""meeting_timezone"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'America/Sao_Paulo'::character varying"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""cal_booking_uid"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 9
                },
                {
                    ""name"": ""cal_event_type_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 10
                },
                {
                    ""name"": ""cal_event_title"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 11
                },
                {
                    ""name"": ""cal_attendee_email"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 12
                },
                {
                    ""name"": ""cal_attendee_name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 13
                },
                {
                    ""name"": ""cal_attendee_timezone"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 14
                },
                {
                    ""name"": ""cal_location"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 15
                },
                {
                    ""name"": ""cal_meeting_url"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 16
                },
                {
                    ""name"": ""cal_reschedule_uid"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 17
                },
                {
                    ""name"": ""cal_cancel_reason"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 18
                },
                {
                    ""name"": ""cal_metadata"",
                    ""type"": ""jsonb"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 19
                },
                {
                    ""name"": ""anum_score_at_booking"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 20
                },
                {
                    ""name"": ""authority_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 21
                },
                {
                    ""name"": ""need_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 22
                },
                {
                    ""name"": ""urgency_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 23
                },
                {
                    ""name"": ""money_score"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 24
                },
                {
                    ""name"": ""qualification_stage"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 25
                },
                {
                    ""name"": ""pain_category"",
                    ""type"": ""character varying(100)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 26
                },
                {
                    ""name"": ""conversation_summary"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 27
                },
                {
                    ""name"": ""reminder_24h_sent"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 28
                },
                {
                    ""name"": ""reminder_24h_sent_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 29
                },
                {
                    ""name"": ""reminder_24h_delivery_status"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 30
                },
                {
                    ""name"": ""reminder_1h_sent"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 31
                },
                {
                    ""name"": ""reminder_1h_sent_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 32
                },
                {
                    ""name"": ""reminder_1h_delivery_status"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 33
                },
                {
                    ""name"": ""meeting_completed"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 34
                },
                {
                    ""name"": ""meeting_completed_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 35
                },
                {
                    ""name"": ""no_show"",
                    ""type"": ""boolean"",
                    ""default"": ""false"",
                    ""nullable"": true,
                    ""position"": 36
                },
                {
                    ""name"": ""no_show_reported_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 37
                },
                {
                    ""name"": ""meeting_notes"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 38
                },
                {
                    ""name"": ""meeting_outcome"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 39
                },
                {
                    ""name"": ""next_action"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 40
                },
                {
                    ""name"": ""status"",
                    ""type"": ""character varying(20)"",
                    ""default"": ""'scheduled'::character varying"",
                    ""nullable"": true,
                    ""position"": 41
                },
                {
                    ""name"": ""cancelled_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 42
                },
                {
                    ""name"": ""cancelled_by"",
                    ""type"": ""character varying(50)"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 43
                },
                {
                    ""name"": ""rescheduled_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 44
                },
                {
                    ""name"": ""rescheduled_to"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 45
                },
                {
                    ""name"": ""created_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 46
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 47
                },
                {
                    ""name"": ""created_by"",
                    ""type"": ""character varying(50)"",
                    ""default"": ""'cal_webhook'::character varying"",
                    ""nullable"": true,
                    ""position"": 48
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_scheduled_meetings_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_scheduled_meetings_pkey ON public.corev4_scheduled_meetings USING btree (id)""
                },
                {
                    ""name"": ""corev4_scheduled_meetings_cal_booking_uid_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_scheduled_meetings_cal_booking_uid_key ON public.corev4_scheduled_meetings USING btree (cal_booking_uid)""
                },
                {
                    ""name"": ""idx_scheduled_meetings_contact"",
                    ""definition"": ""CREATE INDEX idx_scheduled_meetings_contact ON public.corev4_scheduled_meetings USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_scheduled_meetings_company"",
                    ""definition"": ""CREATE INDEX idx_scheduled_meetings_company ON public.corev4_scheduled_meetings USING btree (company_id)""
                },
                {
                    ""name"": ""idx_scheduled_meetings_date"",
                    ""definition"": ""CREATE INDEX idx_scheduled_meetings_date ON public.corev4_scheduled_meetings USING btree (meeting_date)""
                },
                {
                    ""name"": ""idx_scheduled_meetings_status"",
                    ""definition"": ""CREATE INDEX idx_scheduled_meetings_status ON public.corev4_scheduled_meetings USING btree (status) WHERE ((status)::text = ANY ((ARRAY['scheduled'::character varying, 'confirmed'::character varying])::text[]))""
                },
                {
                    ""name"": ""idx_scheduled_meetings_booking_uid"",
                    ""definition"": ""CREATE INDEX idx_scheduled_meetings_booking_uid ON public.corev4_scheduled_meetings USING btree (cal_booking_uid)""
                },
                {
                    ""name"": ""idx_scheduled_meetings_upcoming"",
                    ""definition"": ""CREATE INDEX idx_scheduled_meetings_upcoming ON public.corev4_scheduled_meetings USING btree (meeting_date, status) WHERE ((status)::text = ANY ((ARRAY['scheduled'::character varying, 'confirmed'::character varying])::text[]))""
                },
                {
                    ""name"": ""idx_scheduled_meetings_reminders"",
                    ""definition"": ""CREATE INDEX idx_scheduled_meetings_reminders ON public.corev4_scheduled_meetings USING btree (meeting_date, reminder_24h_sent, reminder_1h_sent, status) WHERE ((status)::text = 'scheduled'::text)""
                },
                {
                    ""name"": ""idx_meetings_contact"",
                    ""definition"": ""CREATE INDEX idx_meetings_contact ON public.corev4_scheduled_meetings USING btree (contact_id)""
                },
                {
                    ""name"": ""idx_meetings_date"",
                    ""definition"": ""CREATE INDEX idx_meetings_date ON public.corev4_scheduled_meetings USING btree (meeting_date)""
                },
                {
                    ""name"": ""idx_meetings_status"",
                    ""definition"": ""CREATE INDEX idx_meetings_status ON public.corev4_scheduled_meetings USING btree (status) WHERE ((status)::text = ANY ((ARRAY['scheduled'::character varying, 'confirmed'::character varying])::text[]))""
                }
            ],
            ""triggers"": [
                {
                    ""name"": ""set_timestamp_scheduled_meetings"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION trigger_set_timestamp()""
                },
                {
                    ""name"": ""trigger_scheduled_meetings_updated_at"",
                    ""event"": ""UPDATE"",
                    ""timing"": ""BEFORE"",
                    ""statement"": ""EXECUTE FUNCTION update_scheduled_meetings_updated_at()""
                }
            ],
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""contact_id"",
                    ""on_delete"": ""CASCADE"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_scheduled_meetings_contact_id_fkey"",
                    ""references_table"": ""corev4_contacts"",
                    ""references_column"": ""id""
                },
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""RESTRICT"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_scheduled_meetings_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_scheduled_meetings_cal_booking_uid_key"",
                    ""columns"": [
                        ""cal_booking_uid""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_session_id_migration"",
            ""columns"": [
                {
                    ""name"": ""old_session_id"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""new_session_id"",
                    ""type"": ""uuid"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 2
                },
                {
                    ""name"": ""contact_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 3
                },
                {
                    ""name"": ""migrated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 5
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_session_id_migration_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_session_id_migration_pkey ON public.corev4_session_id_migration USING btree (old_session_id)""
                },
                {
                    ""name"": ""corev4_session_id_migration_new_session_id_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_session_id_migration_new_session_id_key ON public.corev4_session_id_migration USING btree (new_session_id)""
                },
                {
                    ""name"": ""idx_session_migration_new"",
                    ""definition"": ""CREATE INDEX idx_session_migration_new ON public.corev4_session_id_migration USING btree (new_session_id)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""old_session_id""
            ],
            ""foreign_keys"": null,
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_session_id_migration_new_session_id_key"",
                    ""columns"": [
                        ""new_session_id""
                    ]
                }
            ]
        },
        {
            ""name"": ""corev4_warmup_status"",
            ""columns"": [
                {
                    ""name"": ""id"",
                    ""type"": ""integer"",
                    ""default"": ""nextval('corev4_warmup_status_id_seq'::regclass)"",
                    ""nullable"": false,
                    ""position"": 1
                },
                {
                    ""name"": ""company_id"",
                    ""type"": ""integer"",
                    ""default"": null,
                    ""nullable"": true,
                    ""position"": 2
                },
                {
                    ""name"": ""instance_name"",
                    ""type"": ""text"",
                    ""default"": null,
                    ""nullable"": false,
                    ""position"": 3
                },
                {
                    ""name"": ""warmup_phase"",
                    ""type"": ""text"",
                    ""default"": ""'initial'::text"",
                    ""nullable"": true,
                    ""position"": 4
                },
                {
                    ""name"": ""warmup_day"",
                    ""type"": ""integer"",
                    ""default"": ""1"",
                    ""nullable"": true,
                    ""position"": 5
                },
                {
                    ""name"": ""current_daily_limit"",
                    ""type"": ""integer"",
                    ""default"": ""50"",
                    ""nullable"": true,
                    ""position"": 6
                },
                {
                    ""name"": ""sent_today"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 7
                },
                {
                    ""name"": ""delivered_today"",
                    ""type"": ""integer"",
                    ""default"": ""0"",
                    ""nullable"": true,
                    ""position"": 8
                },
                {
                    ""name"": ""metrics_history"",
                    ""type"": ""jsonb"",
                    ""default"": ""'[]'::jsonb"",
                    ""nullable"": true,
                    ""position"": 9
                },
                {
                    ""name"": ""updated_at"",
                    ""type"": ""timestamp with time zone"",
                    ""default"": ""now()"",
                    ""nullable"": true,
                    ""position"": 10
                }
            ],
            ""indexes"": [
                {
                    ""name"": ""corev4_warmup_status_pkey"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_warmup_status_pkey ON public.corev4_warmup_status USING btree (id)""
                },
                {
                    ""name"": ""corev4_warmup_status_company_id_instance_name_key"",
                    ""definition"": ""CREATE UNIQUE INDEX corev4_warmup_status_company_id_instance_name_key ON public.corev4_warmup_status USING btree (company_id, instance_name)""
                }
            ],
            ""triggers"": null,
            ""primary_key"": [
                ""id""
            ],
            ""foreign_keys"": [
                {
                    ""column"": ""company_id"",
                    ""on_delete"": ""NO ACTION"",
                    ""on_update"": ""NO ACTION"",
                    ""constraint"": ""corev4_warmup_status_company_id_fkey"",
                    ""references_table"": ""corev4_companies"",
                    ""references_column"": ""id""
                }
            ],
            ""rls_policies"": null,
            ""check_constraints"": null,
            ""unique_constraints"": [
                {
                    ""name"": ""corev4_warmup_status_company_id_instance_name_key"",
                    ""columns"": [
                        ""company_id"",
                        ""instance_name""
                    ]
                }
            ]
        }
    ],
    ""database"": ""postgres"",
    ""functions"": null,
    ""sequences"": [
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_ai_decisions_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_anum_history_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_blocklist_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_calendar_settings_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_campaign_executions_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_chat_history_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_chats_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_companies_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_consent_log_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_contact_extras_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_contacts_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_execution_logs_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_followup_campaigns_id_seq1"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_followup_configs_id_seq1"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_followup_executions_id_seq1"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_followup_sequences_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_followup_stage_history_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_followup_steps_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_lead_state_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_meeting_offers_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_message_media_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_n8n_chat_histories_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_outbound_campaigns_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_pain_categories_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_pending_slot_offers_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""9223372036854775807"",
            ""min"": ""1"",
            ""name"": ""corev4_prospects_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_scheduled_meetings_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        },
        {
            ""max"": ""2147483647"",
            ""min"": ""1"",
            ""name"": ""corev4_warmup_status_id_seq"",
            ""start"": ""1"",
            ""increment"": ""1""
        }
    ],
    ""statistics"": [
        {
            ""table"": ""corev4_ai_decisions"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_anum_history"",
            ""dead_tuples"": 54,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": ""2025-12-08T21:10:45.448423-03:00"",
            ""row_count_estimate"": 32
        },
        {
            ""table"": ""corev4_blocklist"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_calendar_settings"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 1
        },
        {
            ""table"": ""corev4_campaign_executions"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_chat_history"",
            ""dead_tuples"": 30,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": ""2026-01-06T19:59:32.452267-03:00"",
            ""row_count_estimate"": 98
        },
        {
            ""table"": ""corev4_chats"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_companies"",
            ""dead_tuples"": 5,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 2
        },
        {
            ""table"": ""corev4_consent_log"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_contact_extras"",
            ""dead_tuples"": 1,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": ""2026-01-07T09:57:50.601796-03:00"",
            ""row_count_estimate"": 16
        },
        {
            ""table"": ""corev4_contacts"",
            ""dead_tuples"": 42,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": ""2025-12-08T20:46:45.043828-03:00"",
            ""row_count_estimate"": 16
        },
        {
            ""table"": ""corev4_execution_logs"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_followup_campaigns"",
            ""dead_tuples"": 10,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": ""2026-01-06T11:07:50.594501-03:00"",
            ""row_count_estimate"": 16
        },
        {
            ""table"": ""corev4_followup_configs"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 2
        },
        {
            ""table"": ""corev4_followup_executions"",
            ""dead_tuples"": 50,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": ""2026-01-06T11:10:50.678976-03:00"",
            ""row_count_estimate"": 80
        },
        {
            ""table"": ""corev4_followup_sequences"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_followup_stage_history"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_followup_steps"",
            ""dead_tuples"": 5,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 9
        },
        {
            ""table"": ""corev4_lead_state"",
            ""dead_tuples"": 3,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": ""2026-01-06T20:02:32.481156-03:00"",
            ""row_count_estimate"": 16
        },
        {
            ""table"": ""corev4_meeting_offers"",
            ""dead_tuples"": 9,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_message_dedup"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_message_media"",
            ""dead_tuples"": 6,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 10
        },
        {
            ""table"": ""corev4_message_templates"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_n8n_chat_histories"",
            ""dead_tuples"": 72,
            ""last_vacuum"": null,
            ""last_analyze"": ""2025-10-27T20:30:36.845219-03:00"",
            ""last_autovacuum"": ""2026-01-06T13:09:53.264068-03:00"",
            ""row_count_estimate"": 308
        },
        {
            ""table"": ""corev4_outbound_campaigns"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_pain_categories"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 20
        },
        {
            ""table"": ""corev4_pending_slot_offers"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_prospects"",
            ""dead_tuples"": 42,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 97
        },
        {
            ""table"": ""corev4_scheduled_meetings"",
            ""dead_tuples"": 27,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_session_id_migration"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        },
        {
            ""table"": ""corev4_warmup_status"",
            ""dead_tuples"": 0,
            ""last_vacuum"": null,
            ""last_analyze"": null,
            ""last_autovacuum"": null,
            ""row_count_estimate"": 0
        }
    ],
    ""generated_at"": ""2026-01-07T10:36:29.264387-03:00"",
    ""schema_version"": ""corev4""
}"